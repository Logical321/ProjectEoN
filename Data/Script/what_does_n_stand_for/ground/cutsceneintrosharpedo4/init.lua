--[[
    init.lua
    Created: 04/17/2024 22:25:25
    Description: Autogenerated script file for the map cutsceneintrosharpedo4.
]]--
-- Commonly included lua functions and data
require 'what_does_n_stand_for.common'

-- Package name
local cutsceneintrosharpedo4 = {}

-- Local, localized strings table
-- Use this to display the named strings you added in the strings files for the map!
-- Ex:
--      local localizedstring = STRINGS.MapStrings['SomeStringName']


-------------------------------
-- Map Callbacks
-------------------------------
---cutsceneintrosharpedo4.Init(map)
--Engine callback function
function cutsceneintrosharpedo4.Init(map)

  --This will fill the localized strings table automatically based on the locale the game is 
  -- currently in. You can use the MapStrings table after this line!
  

end

---cutsceneintrosharpedo4.Enter(map)
--Engine callback function
function cutsceneintrosharpedo4.Enter(map)

StoryTime()

end

---cutsceneintrosharpedo4.Exit(map)
--Engine callback function
function cutsceneintrosharpedo4.Exit(map)


end

---cutsceneintrosharpedo4.Update(map)
--Engine callback function
function cutsceneintrosharpedo4.Update(map)


end

---cutsceneintrosharpedo4.GameSave(map)
--Engine callback function
function cutsceneintrosharpedo4.GameSave(map)


end

---cutsceneintrosharpedo4.GameLoad(map)
--Engine callback function
function cutsceneintrosharpedo4.GameLoad(map)

  GAME:FadeIn(20)

end

-------------------------------
-- Entities Callbacks
-------------------------------

function StoryTime()
local player = CH('PLAYER')

GAME:CutsceneMode(true)
GROUND:Hide('PLAYER')

	UI:SetCenter(true)
	UI:SetAutoFinish(true)
	
	UI:WaitShowVoiceOver("Meanwhile...", 60)

GAME:MoveCamera(136, 344, 1, false)
SOUND:FadeInSE('eos intro wind+rain2', 20)
GROUND:AddMapStatus("cutscene_rain")

local coro1 = TASK:BranchCoroutine(function()
GAME:WaitFrames(10)
GAME:MoveCamera(136, 080, 300, false) --If I JoinCouroutines, this function will eat up the intended effect.
end)

local coro2 = TASK:BranchCoroutine(function()

GAME:FadeIn(20) --This is stupid.

end)

GAME:WaitFrames(150)

UI:WaitShowVoiceOver("Day 319...", -1) --This takes a long while to shift through.
UI:WaitShowVoiceOver("It's one of those storms again...\nYeah, that kinda storm. Tends to happen\na lot here in the [color=#FFC663]Sky Region[color].\nI've gotten quite used to them though.", -1)
UI:WaitShowVoiceOver("This would mark [color=#54ebaf]Madilyn[color]'s first\n'super thunderstorm', as I like to call them.", -1)
UI:WaitShowVoiceOver("It's just... strange.", -1)
UI:WaitShowVoiceOver("We haven't been able to explore any dungeons\nlately due to these harsh weather conditions.", -1)
UI:WaitShowVoiceOver("Heavy rains have caused quite a flood in the\nregion, making it a nightmare for exploring and\ngetting guild work done.", -1)
UI:WaitShowVoiceOver("I hope this isn't a sign of anything bad...\nBut I've been told these kinds of super\nthunderstorms usually meant something.", -1)
UI:WaitShowVoiceOver("[color=#54ebaf]Piks[color] and I had some of these before...\nOnly a matter of time before we know\nwhat that problem is though...", -1)

GAME:WaitFrames(60)

UI:WaitShowVoiceOver("It's getting a bit late...\nI should head to sleep.", -1)
UI:WaitShowVoiceOver("I could use some time on the beach...\nHopefully tomorrow will be fantastic since summer's\njust around the corner.", -1)

GAME:WaitFrames(120)

UI:SetAutoFinish(false)
UI:SetCenter(false)

SOUND:FadeOutSE('eos intro wind+rain2', 20)
GAME:FadeOut(false, 60)

GAME:WaitFrames(60)

GAME:CutsceneMode(false)

GAME:EnterGroundMap("cutsceneintroforest5", "Entrance")

end

return cutsceneintrosharpedo4

